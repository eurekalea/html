<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸ä½æŒ‡ç´‹å¯¦é©—å®¤ v4.0 | çœŸå¯¦è¿½è¹¤æ¨¡æ“¬</title>
    <style>
        :root {
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-main: #1a1a1a;
            --text-sec: #65676b;
            --accent: #1877f2;
            --success: #36a420;
            --danger: #fa383e;
            --warning: #f7b928;
            --border: #ced0d4;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            line-height: 1.5;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: var(--accent);
            margin-bottom: 10px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .badge {
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 4px;
            color: white;
            font-weight: normal;
        }

        .badge-hard { background-color: var(--danger); } /* ç¡¬é«”æŒ‡ç´‹ */
        .badge-soft { background-color: var(--success); } /* Cookie */

        .data-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-family: 'Consolas', monospace;
            font-size: 0.95rem;
        }

        .label { color: var(--text-sec); }
        .value { font-weight: bold; color: var(--text-main); text-align: right;}

        .highlight {
            color: var(--accent);
            background-color: #e7f3ff;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .comparison-box {
            background-color: #fff8e1;
            border: 1px solid #ffe0b2;
            padding: 15px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        button {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            transition: background 0.2s;
        }

        button:hover { background-color: #166fe5; }
        button:disabled { background-color: #e4e6eb; color: #bcc0c4; cursor: not-allowed; }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>ğŸ•µï¸â€â™‚ï¸ èª°åœ¨è¿½è¹¤æˆ‘ï¼Ÿ</h1>
        <p>æ¯”è¼ƒã€Œç¡¬é«”æŒ‡ç´‹ã€èˆ‡ã€ŒCookie è¿½è¹¤ã€çš„å·®ç•°</p>
    </div>

    <div class="card">
        <div class="card-title">
            ç¬¬ä¸€æ­¥ï¼šæ¡é›†ç‰¹å¾µ
        </div>
        <p>è«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•ï¼Œç³»çµ±å°‡æ¨¡æ“¬å»£å‘Šå•†çš„è¿½è¹¤è¡Œç‚ºï¼Œè®€å–ä½ çš„ç€è¦½å™¨ç‰¹å¾µã€‚</p>
        <button id="scanBtn" onclick="startTracking()">ğŸ” é–‹å§‹åˆ†æ (Start Analysis)</button>
    </div>

    <div id="resultArea" class="hidden">
        
        <!-- ç¡¬é«”æŒ‡ç´‹å€ -->
        <div class="card" style="border-left: 5px solid var(--danger);">
            <div class="card-title">
                1. ç¡¬é«”æŒ‡ç´‹ (Device Fingerprint)
                <span class="badge badge-hard">ç„¡ç—•æ¨¡å¼ç„¡æ³•æ¶ˆé™¤</span>
            </div>
            <div class="data-row">
                <span class="label">æŒ‡ç´‹ ID (Hash):</span>
                <span class="value highlight" id="fp-id">è¨ˆç®—ä¸­...</span>
            </div>
            <p style="font-size: 0.85rem; color: #666; margin-top: 5px;">
                é€™æ˜¯æ ¹æ“šä½ çš„è¢å¹•ã€é¡¯ç¤ºå¡ã€ä½œæ¥­ç³»çµ±ç®—å‡ºä¾†çš„ã€‚åªè¦ä½ ä¸æ›é›»è…¦ï¼Œé€™å€‹ ID <strong style="color: var(--danger);">æ°¸é ä¸€æ¨£</strong>ã€‚
            </p>
            <hr style="border: 0; border-top: 1px dashed #ddd; margin: 10px 0;">
            <div class="data-row"><span class="label">User Agent:</span> <span class="value" id="fp-ua" style="font-size:0.8em">...</span></div>
            <div class="data-row"><span class="label">è¢å¹•è§£æåº¦:</span> <span class="value" id="fp-screen">...</span></div>
            <div class="data-row"><span class="label">Canvas ç¹ªåœ–ç‰¹å¾µ:</span> <span class="value" id="fp-canvas">...</span></div>
        </div>

        <!-- Cookie è¿½è¹¤å€ -->
        <div class="card" style="border-left: 5px solid var(--success);">
            <div class="card-title">
                2. æ¨¡æ“¬ Cookie (Tracking Cookie)
                <span class="badge badge-soft">ç„¡ç—•æ¨¡å¼å¯é˜²ç¦¦</span>
            </div>
            <div class="data-row">
                <span class="label">Cookie ID:</span>
                <span class="value highlight" id="cookie-id">è®€å–ä¸­...</span>
            </div>
            <p style="font-size: 0.85rem; color: #666; margin-top: 5px;">
                é€™æ˜¯ç¶²ç«™å­˜åœ¨ä½ é›»è…¦è£¡çš„å°æª”æ¡ˆã€‚å¦‚æœä½ é–‹<strong>ç„¡ç—•æ¨¡å¼</strong>ï¼Œæ¯æ¬¡é‡æ–°é–‹å•Ÿé€™å€‹ ID <strong style="color: var(--success);">éƒ½æœƒæ”¹è®Š</strong>ã€‚
            </p>
        </div>

        <!-- æ•™å­¸å¼•å°å€ -->
        <div class="comparison-box">
            <strong>ğŸ‘¨â€ğŸ« è€å¸«èªªï¼š</strong><br>
            è«‹è©¦è‘—ç”¨<strong>ã€Œä¸€èˆ¬æ¨¡å¼ã€</strong>å’Œ<strong>ã€Œç„¡ç—•æ¨¡å¼ã€</strong>åˆ†åˆ¥æ‰“é–‹é€™å€‹æª”æ¡ˆï¼Œè§€å¯Ÿä¸Šé¢å…©å€‹ ID çš„è®ŠåŒ–ï¼š
            <ul>
                <li><strong>ä¸€èˆ¬æ¨¡å¼é‡æ•´ï¼š</strong> å…©å€‹ ID éƒ½ä¸æœƒè®Šï¼ˆç¶²ç«™å®Œå…¨èªå¾—ä½ ï¼‰ã€‚</li>
                <li><strong>é–‹å•Ÿç„¡ç—•æ¨¡å¼ï¼š</strong> ã€Œç¡¬é«”æŒ‡ç´‹ IDã€é‚„æ˜¯åŸæœ¬çš„é‚£å€‹ï¼ˆè¢«èªå‡ºè£ç½®ï¼‰ï¼Œä½†ã€ŒCookie IDã€è®Šæˆäº†æ–°çš„ï¼ˆç„¡æ³•é€£çµåˆ°èˆŠç´€éŒ„ï¼‰ã€‚</li>
            </ul>
        </div>

    </div>
</div>

<script>
    // ç°¡å–®çš„é›œæ¹Šå‡½æ•¸
    function cyrb53(str, seed = 0) {
        let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;
        for (let i = 0, ch; i < str.length; i++) {
            ch = str.charCodeAt(i);
            h1 = Math.imul(h1 ^ ch, 2654435761);
            h2 = Math.imul(h2 ^ ch, 1597334677);
        }
        h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);
        h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);
        return 4294967296 * (2097151 & h2) + (h1 >>> 0);
    }

    // 1. çœŸå¯¦ Canvas æŒ‡ç´‹ (ä¸ä½¿ç”¨éš¨æ©Ÿæ•¸)
    function getRealCanvasFingerprint() {
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        var txt = 'BrowserLeaking<canvas>1.0';
        ctx.textBaseline = "top";
        ctx.font = "14px 'Arial'";
        ctx.textBaseline = "alphabetic";
        ctx.fillStyle = "#f60";
        ctx.fillRect(125, 1, 62, 20);
        ctx.fillStyle = "#069";
        ctx.fillText(txt, 2, 15);
        ctx.fillStyle = "rgba(102, 204, 0, 0.7)";
        ctx.fillText(txt, 4, 17);
        return cyrb53(canvas.toDataURL());
    }

    // 2. æ¨¡æ“¬ Cookie (ä½¿ç”¨ LocalStorage)
    function getCookieId() {
        let id = localStorage.getItem('sim_cookie_id');
        if (!id) {
            id = 'USER-' + Math.floor(Math.random() * 1000000);
            localStorage.setItem('sim_cookie_id', id);
            return id + " (æ–°è¨ªå®¢)";
        }
        return id + " (èˆŠè¨ªå®¢)";
    }

    function startTracking() {
        document.getElementById('scanBtn').disabled = true;
        document.getElementById('resultArea').classList.remove('hidden');

        // è¨ˆç®—ç¡¬é«”ç‰¹å¾µ (é€™äº›æ˜¯æ†å®šçš„)
        const ua = navigator.userAgent;
        const screenRes = `${screen.width}x${screen.height}x${screen.colorDepth}`;
        const canvasFp = getRealCanvasFingerprint();
        
        // çµ„åˆç¡¬é«”æŒ‡ç´‹
        const hardwareString = `${ua}-${screenRes}-${canvasFp}`;
        const hardwareID = cyrb53(hardwareString).toString(16).toUpperCase();

        // é¡¯ç¤ºç¡¬é«”æ•¸æ“š
        document.getElementById('fp-id').textContent = "HW-" + hardwareID;
        document.getElementById('fp-ua').textContent = ua.substring(0, 50) + "...";
        document.getElementById('fp-screen').textContent = screenRes;
        document.getElementById('fp-canvas').textContent = "Hash: " + canvasFp;

        // é¡¯ç¤º Cookie æ•¸æ“š
        document.getElementById('cookie-id').textContent = getCookieId();
    }
</script>

</body>
</html>