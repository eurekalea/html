<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ©Ÿå¯†è³‡æ–™åº«å…¥å£ | Secure Login</title>
    <style>
        /* --- CSS æ¨£å¼ï¼šæ‰“é€ æš—ç¶²/é§­å®¢é¢¨æ ¼ --- */
        body {
            background-color: #0d1117; /* æ·±è‰²èƒŒæ™¯ */
            color: #c9d1d9;
            font-family: 'Courier New', Courier, monospace; /* åƒç¨‹å¼ç¢¼çš„å­—é«” */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* èƒŒæ™¯ç‰¹æ•ˆ */
        .bg-effect {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.15),
                rgba(0, 0, 0, 0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
            z-index: 0;
        }

        .container {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 10px;
            padding: 40px;
            width: 350px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.1);
            position: relative;
            z-index: 1;
            text-align: center;
        }

        h2 {
            color: #58a6ff;
            margin-bottom: 20px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.8em;
            color: #8b949e;
        }

        input {
            width: 100%;
            padding: 10px;
            background: #0d1117;
            border: 1px solid #30363d;
            color: #fff;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 1em;
            outline: none;
            transition: border-color 0.3s;
        }

        input:focus {
            border-color: #58a6ff;
            box-shadow: 0 0 5px rgba(88, 166, 255, 0.5);
        }

        /* çœ¼ç›åœ–ç¤º */
        .eye-icon {
            position: absolute;
            right: 10px;
            top: 32px;
            cursor: pointer;
            font-size: 1.2em;
            user-select: none;
        }

        button {
            width: 100%;
            padding: 12px;
            background: #238636;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background 0.3s;
        }

        button:hover {
            background: #2ea043;
        }

        .error-msg {
            color: #ff7b72;
            font-size: 0.9em;
            margin-top: 15px;
            min-height: 1.2em;
            display: none; /* é è¨­éš±è— */
        }

        /* æˆåŠŸç™»å…¥å¾Œçš„ç•«é¢ */
        #success-view {
            display: none;
        }
        
        .success-icon {
            font-size: 3em;
            color: #2ea043;
            margin-bottom: 10px;
        }

        .secret-data {
            margin-top: 20px;
            padding: 15px;
            background: rgba(46, 160, 67, 0.1);
            border: 1px dashed #2ea043;
            color: #7ee787;
            text-align: left;
            font-size: 0.9em;
        }

        .logout-btn {
            background: #da3633;
            margin-top: 20px;
        }
        .logout-btn:hover {
            background: #f85149;
        }

    </style>
</head>
<body>

    <div class="bg-effect"></div>

    <div class="container">
        <div id="login-view">
            <h2>SYSTEM LOGIN</h2>
            
            <div class="input-group">
                <label for="username">USERNAME</label>
                <input type="text" id="username" placeholder="Enter username">
            </div>

            <div class="input-group">
                <label for="password">PASSWORD</label>
                <input type="password" id="password" placeholder="Enter password">
                <span class="eye-icon" onclick="togglePassword()">ğŸ‘ï¸</span>
            </div>

            <button onclick="attemptLogin()">LOG IN</button>
            <div id="error-msg" class="error-msg">å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ï¼Œç„¡æ³•ç™»å…¥</div>
        </div>

        <div id="success-view">
            <div class="success-icon">âœ”</div>
            <h2>ACCESS GRANTED</h2>
            <p>æ­¡è¿å›ä¾†ï¼Œç®¡ç†å“¡ã€‚</p>
            
            <div class="secret-data">
                [æ©Ÿå¯†è³‡æ–™]<br>
                > ä¿¡ä»»é‚Šç•Œï¼šå·²å´©å£<br>
                > Cookie ç‹€æ…‹ï¼šå·²æš´éœ²<br>
                > æ§åˆ¶æ¬Šï¼šè½‰ç§»ä¸­...
            </div>

            <button class="logout-btn" onclick="logout()">LOG OUT</button>
        </div>
    </div>

    <script>
        // --- è¨­å®šæ­£ç¢ºçš„å¸³è™Ÿå¯†ç¢¼ ---
        const CORRECT_USER = "student";
        const CORRECT_PASS = "thisistest";
        // é€™æ˜¯é§­å®¢è¦å·çš„ã€Œé‡‘é‘°ã€åç¨±
        const SESSION_KEY = "auth_token"; 
        const SESSION_VALUE = "valid_access_granted_12345";

        // 1. é é¢è¼‰å…¥æ™‚ï¼Œæª¢æŸ¥æ˜¯å¦æœ‰ã€Œé€šè¡Œè­‰ (Cookie)ã€
        window.onload = function() {
            checkCookie();
        };

        // æª¢æŸ¥ Cookie çš„å‡½æ•¸
        function checkCookie() {
            // è®€å–ç€è¦½å™¨æ‰€æœ‰çš„ cookie
            let cookies = document.cookie;
            console.log("Current Cookies:", cookies); // è®“å­¸ç”Ÿåœ¨ F12 Console çœ‹åˆ°

            // å¦‚æœ cookie è£¡é¢åŒ…å«æˆ‘å€‘è¨­å®šçš„é€šè¡Œè­‰
            if (cookies.includes(`${SESSION_KEY}=${SESSION_VALUE}`)) {
                showSuccessPage();
            } else {
                showLoginPage();
            }
        }

        // 2. åˆ‡æ›å¯†ç¢¼é¡¯ç¤º/éš±è— (çœ¼ç›åŠŸèƒ½)
        function togglePassword() {
            const pwdInput = document.getElementById("password");
            const icon = document.querySelector(".eye-icon");
            if (pwdInput.type === "password") {
                pwdInput.type = "text";
                icon.textContent = "ğŸ™ˆ"; // é–‰çœ¼åœ–ç¤º
            } else {
                pwdInput.type = "password";
                icon.textContent = "ğŸ‘ï¸"; // é–‹çœ¼åœ–ç¤º
            }
        }

        // 3. åŸ·è¡Œç™»å…¥
        function attemptLogin() {
            const userIn = document.getElementById("username").value;
            const passIn = document.getElementById("password").value;
            const errorDiv = document.getElementById("error-msg");

            if (userIn === CORRECT_USER && passIn === CORRECT_PASS) {
                // ç™»å…¥æˆåŠŸï¼šå¯«å…¥ Cookie
                // è¨­å®šä¸€å€‹æœ‰æ•ˆæœŸç‚º 1 å¤©çš„ cookie
                document.cookie = `${SESSION_KEY}=${SESSION_VALUE}; path=/; max-age=86400`;
                
                errorDiv.style.display = "none";
                alert("é©—è­‰é€šéï¼æ­£åœ¨å¯«å…¥ Cookie...");
                showSuccessPage();
            } else {
                // ç™»å…¥å¤±æ•—
                errorDiv.style.display = "block";
                
                // ç‚ºäº†å¢åŠ çœŸå¯¦æ„Ÿï¼Œæ–æ™ƒä¸€ä¸‹è¦–çª— (CSS animation logic could be added here)
                console.warn("Login Failed");
            }
        }

        // 4. ç™»å‡º (æ¸…é™¤ Cookie)
        function logout() {
            // å°‡ cookie éæœŸæ™‚é–“è¨­ç‚ºéå»ï¼Œå³ç‚ºåˆªé™¤
            document.cookie = `${SESSION_KEY}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`;
            location.reload(); // é‡æ–°æ•´ç†é é¢
        }

        // åˆ‡æ›ä»‹é¢é¡¯ç¤º
        function showSuccessPage() {
            document.getElementById("login-view").style.display = "none";
            document.getElementById("success-view").style.display = "block";
        }

        function showLoginPage() {
            document.getElementById("login-view").style.display = "block";
            document.getElementById("success-view").style.display = "none";
        }
    </script>
</body>
</html>
